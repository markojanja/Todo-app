(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function o(o){t(1,arguments);var s=Object.prototype.toString.call(o);return o instanceof Date||"object"===e(o)&&"[object Date]"===s?new Date(o.getTime()):"number"==typeof o||"[object Number]"===s?new Date(o):("string"!=typeof o&&"[object String]"!==s||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function s(e){t(1,arguments);var s=o(e);return s.setHours(0,0,0,0),s}var r={};function n(){return r}function a(e,s){var r,a,c,l,i,d,u,m;t(1,arguments);var p=n(),y=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(r=null!==(a=null!==(c=null!==(l=null==s?void 0:s.weekStartsOn)&&void 0!==l?l:null==s||null===(i=s.locale)||void 0===i||null===(d=i.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==c?c:p.weekStartsOn)&&void 0!==a?a:null===(u=p.locale)||void 0===u||null===(m=u.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==r?r:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var j=o(e),f=j.getDay(),g=(f<y?7:0)+f-y;return j.setDate(j.getDate()-g),j.setHours(0,0,0,0),j}class c{constructor(e,t="normal",o,s,r=!1){this.name=e,this.status=r,this.priority=t,this.date=s,this.projectKey=o}}class l{constructor(e){this.name=e,this.todos=[]}addTodo(e,t,o){const s=new c(e,t,this.name,o);this.todos.push(s)}deleteTodo(e){const t=this.todos.findIndex((t=>t.name===e));this.todos.splice(t,1)}updateStatus(e){this.todos.find((t=>(t.name===e&&(t.status=!t.status),1)))}}class i{constructor(){this.projectList=[];const e=JSON.parse(localStorage.getItem("ok"));e&&e.forEach((e=>{const t=new l(e.name);e.todos.forEach((o=>{const s=new c(o.name,o.priority,e.name,o.date,o.status);t.todos.push(s)})),this.projectList.push(t)}))}addProjects(e){const t=new l(e);this.projectList.push(t)}deleteProjects(e){const t=this.projectList.findIndex((t=>t.name===e));this.projectList.splice(t,1)}updateProjects(e,t){const o=this.projectList.find((t=>e===t.name));return o.todos.forEach((e=>{e.projectKey=t})),o.name=t,o}selectProject(e){return this.projectList.find((t=>e===t.name))}getAllTasks(){let e=[];return this.projectList.forEach((t=>{e=t.todos.concat(e)})),{name:"all",todos:e}}filterTodays(){return{name:"today",todos:this.projectList.reduce(((e,o)=>{const r=o.todos.filter((e=>function(e){return t(1,arguments),function(e,o){t(2,arguments);var r=s(e),n=s(o);return r.getTime()===n.getTime()}(e,Date.now())}(new Date(e.date))));return e.concat(r)}),[])}}filterThisWeek(){return{name:"week",todos:this.projectList.reduce(((e,o)=>{const s=o.todos.filter((e=>function(e,o){return t(1,arguments),function(e,o,s){t(2,arguments);var r=a(e,s),n=a(o,s);return r.getTime()===n.getTime()}(e,Date.now(),o)}(new Date(e.date))));return e.concat(s)}),[])}}}class d{constructor(){this.sidebar=document.querySelector(".project-list-upper"),this.list=["all","todays","upcoming"]}render(){const e=this.sidebar;this.list.forEach((t=>{const o=document.createElement("li");o.setAttribute("data-id",t),o.textContent=t,e.appendChild(o)}))}}const u=(e,t)=>{document.getElementById(e).innerHTML=t?`${e} <span class="badge">${t.todos.length}</span>`:`${e} <span class="badge">0</span>`},m=e=>{const t=document.querySelector("#project");t.innerHTML="",t.innerHTML=`\n  <h1 class='pt'>${e}</h1>\n  <ul id="taskList"></ul>\n  `};class p{static loadUI(){p.init(),p.toggleNav(),p.createProjectController(),p.renderProjectList(),p.setActiveProject(),p.UpdateProjectController(),p.toggleFormButtonController(),p.renderTodaysTasks(),p.renderThisWeek(),p.renderAllTasks(),p.closeSidebar(),p.closeSidebar2(),u("all",p.projects.getAllTasks()),u("today",p.projects.filterTodays()),u("week",p.projects.filterThisWeek())}static init(){const e=p.projects.getAllTasks();m("All"),this.renderTasks(e)}static toggleFormButtonController(){document.querySelector(".toggle-form").addEventListener("click",(()=>{document.getElementById("myForm").classList.toggle("show")}))}static toggleNav(){const e=document.querySelector(".nav-btn"),t=document.querySelector(".sidebar");!1!==window.matchMedia("(max-width: 768px)").matches&&e.addEventListener("click",(()=>{e.classList.toggle("active"),t.classList.toggle("toggle")}))}static closeSidebar(){const e=document.querySelector(".nav-btn"),t=document.querySelector(".sidebar"),o=document.querySelectorAll(".project-link-upper");!1!==window.matchMedia("(max-width: 768px)").matches&&o.forEach((o=>{o.addEventListener("click",(()=>{e.classList.remove("active"),t.classList.remove("toggle")}))}))}static closeSidebar2(){const e=document.querySelector(".nav-btn"),t=document.querySelector(".sidebar");document.querySelectorAll(".title").forEach((o=>{o.addEventListener("click",(()=>{e.classList.remove("active"),t.classList.remove("toggle")}))}))}static toggleForm2(){const e=document.querySelector(".toggle-form-2"),t=document.querySelector(".form-container");e.addEventListener("click",(()=>{t.style.display="flex";const e=document.querySelector(".close-form-btn"),o=document.getElementById("myForm2");e.addEventListener("click",(()=>{t.style.display="none",o.reset()}))}))}static projects=new i;static createProjectController(){const e=document.getElementById("myForm");e.addEventListener("submit",(t=>{t.preventDefault();const o=document.getElementById("projectName");p.projects.addProjects(o.value),localStorage.setItem("ok",JSON.stringify(this.projects.projectList));const s=p.projects.selectProject(o.value);p.renderProject(s),this.renderProjectList(),e.reset(),e.classList.remove("show")}),!1)}static UpdateProjectController(){document.querySelectorAll(".project-link").forEach((e=>{e.querySelector(".btn-edit").addEventListener("click",(t=>{const o=e.querySelector(".modal");let s=t.target.dataset.value;const r=document.getElementById(`input-${s}`);r.value=s,o.style.display="flex",p.renderProject(p.projects.selectProject(s)),o.addEventListener("submit",(()=>{t.preventDefault(),r.value&&(this.projects.updateProjects(s,r.value),localStorage.setItem("ok",JSON.stringify(this.projects.projectList)),this.renderProjectList(),s&&(s=r.value,p.renderProject(p.projects.selectProject(s))),o.reset())}))}))}))}static deleteProjectController(){const e=document.querySelectorAll(".btn-delete"),t=document.querySelector("#project");this.setActiveProject(),e.forEach((e=>{e.addEventListener("click",(e=>{const o=e.target.dataset.value;console.log(o),p.projects.projectList.forEach((e=>{e!==o&&(t.innerHTML="Project Deleted"),this.renderProjectList()})),p.projects.deleteProjects(o),localStorage.setItem("ok",JSON.stringify(this.projects.projectList)),this.renderProjectList(),u("all",p.projects.getAllTasks()),u("today",p.projects.filterTodays()),u("week",p.projects.filterThisWeek())}))}))}static renderProjectList(){const e=document.getElementById("list");(new d).render(),e.innerHTML="",p.projects.projectList.map((t=>(e.innerHTML+=`\n      <li class="project-link">\n        <div class="link-container">\n          <p class="title">${t.name}</p>\n          <button class="btn-edit" type="button"><i class="fa-solid fa-pen" data-value="${t.name}"></i></button>\n          <button class="btn-delete" type="button"><i class="fa-solid fa-trash" data-value="${t.name}"></i></button>\n        </div>\n\n        <form class="modal">\n          <input type="text" class="inputVal" id="input-${t.name}" required>\n          <button class="add-btn" type="submit" id="btn3"><i class="fa-solid fa-check"></i></button>\n        </form>\n      </li>\n      `,1))),this.UpdateProjectController(),this.deleteProjectController(),p.closeSidebar(),p.closeSidebar2()}static setActiveProject(){document.querySelectorAll(".title").forEach((e=>{e.addEventListener("click",(()=>{const t=e.textContent,o=p.projects.selectProject(t);localStorage.setItem("ok",JSON.stringify(p.projects.projectList)),p.renderProject(o)}),!1)}))}static renderProject(e){const t=document.querySelector("#project");t.innerHTML="",t.innerHTML=`\n    <h1 class='pt'>${e.name}</h1>\n    <button class="toggle-form-2"><i class="fa-sharp fa-solid fa-plus"></i></button>\n    `,t.innerHTML+='\n    <div class="form-container">\n    <div class="form-title">\n    <h2>New task</h2>\n    <button class="close-form-btn"><i class="fa-solid fa-xmark"></i></button>\n    </div>\n    <form action="" id="myForm2" autocomplete="off">\n      <label for="taskName2">Task name</label>\n      <input type="text" name="taskName2" id="taskName2" required>\n      <label for="taskDate">Date</label>\n      <input type="date" name="taskDate" id="taskDate" required>\n      <label for="select">Priority</label>\n        <select id="select" name="select">\n          <option value="normal">normal</option>\n          <option value="high">high</option>\n          <option value="low">low</option>\n        </select>\n      <button type="submit" id="btn"></button>\n    </form>\n    </div>\n    <ul id="taskList"></ul>',p.toggleForm2(),p.createTaskConroller(),e.todos.length>0&&p.renderTasks(e)}static renderTasks(e){(e=>{const t=document.getElementById("taskList");t.innerHTML="",e.map((e=>{const o=e.status?"st-done":"";return t.innerHTML+=`\n          <li class="task-card p-${e.priority}">\n            <button class="status-btn ${o}" data-val="${e.name}" data-key="${e.projectKey}"></button>\n            <p class="ptt" >${e.name} (${e.projectKey})</p><span class="date">${e.date}</span>\n            <button class="delete-task" data-val="${e.name}" data-key="${e.projectKey}"></button>\n          </li>`,1}))})(e.todos),p.updateTaskController(e),p.deleteTaskController(e),localStorage.setItem("ok",JSON.stringify(p.projects.projectList))}static createTaskConroller(){const e=document.getElementById("myForm2"),t=document.querySelector(".pt").textContent,o=p.projects.selectProject(t),s=document.querySelector(".form-container");e.addEventListener("submit",(t=>{t.preventDefault();const r=document.getElementById("taskName2"),n=document.getElementById("taskDate"),a=new Date(n.value).toDateString(),c=document.getElementById("select");o.addTodo(r.value,c.value,a),localStorage.setItem("ok",JSON.stringify(this.projects.projectList)),p.renderTasks(o),p.renderProjectList(),e.reset(),s.style.display="none",u("all",p.projects.getAllTasks()),u("today",p.projects.filterTodays()),u("week",p.projects.filterThisWeek())}))}static updateTaskController(e){document.querySelectorAll(".status-btn").forEach((t=>{t.addEventListener("click",(t=>{const o=t.target.dataset.key;let s=p.projects.selectProject(o);const r=t.target.dataset.val;s.updateStatus(r),localStorage.setItem("ok",JSON.stringify(this.projects.projectList)),s=e,p.renderTasks(s)}))}))}static deleteTaskController(e){document.querySelectorAll(".delete-task").forEach((t=>{t.addEventListener("click",(t=>{const o=t.target.dataset.key;let s=p.projects.selectProject(o);const r=t.target.dataset.val;switch(s.deleteTodo(r),localStorage.setItem("ok",JSON.stringify(this.projects.projectList)),e.name){case"all":s=p.projects.getAllTasks(),p.renderTasks(s);break;case"today":s=p.projects.filterTodays(),p.renderTasks(s);break;case"week":s=p.projects.filterThisWeek(),p.renderTasks(s);break;default:s=e,p.renderTasks(s)}u("all",p.projects.getAllTasks()),u("today",p.projects.filterTodays()),u("week",p.projects.filterThisWeek())}))}))}static renderAllTasks(){document.getElementById("all").addEventListener("click",(()=>{m("All");const e=p.projects.getAllTasks();u("all",e),p.renderTasks(e),p.renderProjectList()}))}static renderTodaysTasks(){document.getElementById("today").addEventListener("click",(()=>{m("Todays");const e=p.projects.filterTodays();u("today",e),p.renderTasks(e)}))}static renderThisWeek(){document.getElementById("week").addEventListener("click",(()=>{m("Week");let e=p.projects.filterThisWeek();p.renderTasks(e),e=p.projects.filterThisWeek()}))}}document.addEventListener("DOMContentLoaded",p.loadUI())})();